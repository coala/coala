dependencies:
  cache_directories:
    - ~/.pyenv/versions/3.2.6
    - ~/.pyenv/versions/3.3.6
    - ~/.pyenv/versions/3.4.2
    - ~/.pyenv/versions/pypy3-2.4.0
  override:
    - bash .misc/deps.pre.sh

test:
  pre:
    - python run_tests.py:
        parallel: true
    - bash .misc/deps.sh:
        parallel: true
  override:
    - bash .misc/tests.sh:
        parallel: true
    - python setup.py install:
        parallel: true
    - coala-ci:
        parallel: true
    - bash .misc/deploy.coverage.sh:
        parallel: true

deployment:
  deployment_scripts:
    branch: /.*/
    commands:
      - bash .misc/deploy.zanata.sh
      - bash .misc/deploy.pypi.sh
